# Environment configuration for Captive Portal
# Copy this file to .env and fill in your actual values
# NEVER commit .env to git - it contains secrets!

# =============================================================================
# SECRETS - Replace these with your actual values
# =============================================================================

# Database password (must match docker-compose.yml POSTGRES_PASSWORD)
DB_PASSWORD=change_this_password

# Application secret key (generate with: python -c "import secrets; print(secrets.token_hex(32))")
SECRET_KEY=change_this_secret_key_in_production

# Microsoft Graph API Configuration (for email via Microsoft 365)
# See MICROSOFT_GRAPH_SETUP.md for setup instructions
GRAPH_TENANT_ID=your-tenant-id-from-azure-portal
GRAPH_CLIENT_ID=your-client-id-from-app-registration
GRAPH_CLIENT_SECRET=your-client-secret-from-azure-portal

# RADIUS shared secret (must match FreeRADIUS clients.conf)
RADIUS_SECRET=testing123

# =============================================================================
# CONFIGURATION - Adjust these for your environment
# =============================================================================

# Microsoft Graph - Email address to send from (user or shared mailbox)
GRAPH_FROM_EMAIL=portal@yourdomain.com

# Admin email address (receives registration request notifications)
ADMIN_EMAIL=admin@yourdomain.com

# RADIUS server IP address (usually the Pi running FreeRADIUS)
RADIUS_SERVER=192.168.99.4

# RADIUS NAS IP address (usually the switch IP)
RADIUS_NAS_IP=192.168.99.1

# Portal URL (used in email links - change to your domain)
PORTAL_URL=http://portal.yourdomain.com

# Kea DHCP Control Socket (path inside container - usually no need to change)
KEA_CONTROL_SOCKET=/kea/leases/kea4-ctrl-socket

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Require email verification before granting access (true/false)
EMAIL_VERIFICATION_REQUIRED=false

# Minutes before verification link expires
VERIFICATION_TIMEOUT_MINUTES=15

# =============================================================================
# VLAN MAPPINGS (status â†’ VLAN ID)
# =============================================================================
# Map user status types to VLAN IDs
# These should match your network switch VLAN configuration

VLAN_FRIARS=10
VLAN_STAFF=20
VLAN_STUDENTS=30
VLAN_GUESTS=40
VLAN_CONTRACTORS=50
VLAN_VOLUNTEERS=60
VLAN_IOT=70
VLAN_RESTRICTED=90
VLAN_UNREGISTERED=99

# =============================================================================
# NOTES
# =============================================================================
# 
# 1. Generate SECRET_KEY:
#    python -c "import secrets; print(secrets.token_hex(32))"
#
# 2. Generate DB_PASSWORD:
#    python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# 3. Microsoft Graph Setup:
#    See MICROSOFT_GRAPH_SETUP.md for complete instructions
#
# 4. After editing, restart services:
#    docker compose down && docker compose up -d
#
